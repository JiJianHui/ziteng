var _form=$("#formSearch");$(".boxListMap").length>0&&$(".boxListMap").lock();function doLock(a){$(".boxListMap").lock(!a)}$(".btnMoreCity").click(function(){var a=$("#boxCityList").css("height");if(a=="36px"){$("#boxCityList").css("height","auto");$(this).html("收起").addClass("clicked");$("#btnAllCity").show()}else{$("#boxCityList").css("height","36px");$(this).html("更多").removeClass("clicked");$("#btnAllCity").hide()}});var _startCity,_startArea,_endCity,_endArea;_startCity=_form.find('[name="Sp"]').chooseCity({data:m.getCity()});_startArea=_form.find('[name="Sc"]').chooseCity({data:function(){return m.getArea(_startCity.getValue())}});_endCity=_form.find('[name="Ep"]').chooseCity({data:m.getCity()});_endArea=_form.find('[name="Ec"]').chooseCity({data:function(){return m.getArea(_endCity.getValue())}});_startCity.link(_startArea);_endCity.link(_endArea);if($("#boxListMap").length>0){var script=document.createElement("script");script.src="http://api.map.baidu.com/api?v=1.3&callback=setMap";document.body.appendChild(script);var _map;function setMap(){listHover()}function listHover(){var a=new BMap.Map("boxListMap");a.disableDragging();a.disableDoubleClickZoom();a.centerAndZoom("重庆");var c=new BMap.DrivingRoute(a,{renderOptions:{map:a,enableDragging:false}}),b,d=function(a){var f=a.find('[name="spx"]').val(),g=a.find('[name="spy"]').val(),d=a.find('[name="epx"]').val(),e=a.find('[name="epy"]').val(),h=a.find('[name="km"]').val(),j=new BMap.Point(f,g),i=new BMap.Point(d,e);clearTimeout(b);b=setTimeout(function(){c.search(j,i)},200);$("#boxListMapKm").html(h)};$(".aa-list-item").find("ul li").mouseover(function(){d($(this))})}}